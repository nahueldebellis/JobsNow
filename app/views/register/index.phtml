<form action="/JobsNow/register/register" method ="post" id='user_form' enctype="multipart/form-data" >
    <input type="text" name = "name" placeholder = "name"><br>
    <input type="password" name = "pass" placeholder = "password"><br>
    <input type="email" name="email" placeholder = "email"><br>
    <input type="text" name="phone" placeholder = "phone"><br>
    <input type="text" name="address" placeholder = "address"><br>
    <input type="text" name="rotulo" placeholder = "rotulongo"><br>
    <label for="">Profile photo: </label>
    <input type="file" name="profile_photo"><br>
    <select name='type' id='type'>
        <option value="Seleccione chorongo"></option>
        <option value='Employee'> Employee</option>
        <option value='Company'> Company</option>
    </select><br>
    <div id="extra"></div>
</form>

<script>
const type = document.getElementById('type');
const user_form = document.getElementById('user_form');
const extra = document.getElementById('extra');

function renderOptions(url){
    fetch(url)
    .then( response => response.json() )
    .then( options  => {
        extra.innerHTML = '';
        for(name in options){
            let input = document.createElement('input', name);
            let cut = document.createElement('br');
            input.name = name;
            input.type = options[name];
            extra.insertBefore(input, undefined);
            extra.insertBefore(cut, undefined);
        }
        let send_form = document.createElement('input');
        send_form.type = 'submit';
        send_form.value = "porque en espadol";
        extra.insertBefore(send_form, undefined);
    });
}


type.addEventListener('change', ()=>{
    if(type.value === "Employee")
        renderOptions('/JobsNow/register/employee');
    else if(type.value === "Company")
        renderOptions('/JobsNow/register/company');
});

</script>
